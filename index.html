<!doctype html>
<html lang="pl">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dyskretna Intencja</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&amp;family=Roboto:wght@400;700&amp;family=Press+Start+2P&amp;display=swap" rel="stylesheet">
  <style>
        body {
            box-sizing: border-box;
        }
        
        :root {
            --bg: #9fc6e2;
            --bg2: #cfe8f8;
            --navy: #1e3a8a;
            --quote-grad-start: #3b5998;
            --quote-grad-end: #5a8dee;
            --point-blue: #2b7bd6;
        }

        /* Schematy kolor√≥w */
        /* KOLORY SEZONOWE */
        
        .theme-christmas {
            --bg: #1a472a;
            --bg2: #2d5a3d;
            --navy: #c41e3a;
            --quote-grad-start: #c41e3a;
            --quote-grad-end: #8b0000;
            --point-blue: #ffffff;
        }

        .theme-christmas .title {
            color: #ffffff;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .theme-christmas .subtitle {
            color: #ffffff;
            opacity: 1;
        }

        .theme-christmas .color-scheme span,
        .theme-christmas .settings-header h2,
        .theme-christmas .titles-header h2,
        .theme-christmas .prayer-modal-title,
        .theme-christmas .font-preview,
        .theme-christmas .settings-tabs .settings-tab,
        .theme-christmas .title-name,
        .theme-christmas .close-modal,
        .theme-christmas .close-prayer-modal {
            color: #ffffff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6), 0 1px 2px rgba(0, 0, 0, 0.8);
        }

        .theme-snow {
            --bg: #e0f2fe;
            --bg2: #f0f9ff;
            --navy: #0c4a6e;
            --quote-grad-start: #0ea5e9;
            --quote-grad-end: #38bdf8;
            --point-blue: #0284c7;
        }

        .theme-snow .title {
            color: #0284c7;
            text-shadow: 0 2px 8px rgba(2, 132, 199, 0.4);
        }

        .theme-snow .subtitle {
            color: #0c4a6e;
            opacity: 0.9;
        }

        .theme-snow .color-scheme span,
        .theme-snow .settings-header h2,
        .theme-snow .titles-header h2,
        .theme-snow .prayer-modal-title,
        .theme-snow .font-preview,
        .theme-snow .settings-tabs .settings-tab,
        .theme-snow .title-name,
        .theme-snow .close-modal,
        .theme-snow .close-prayer-modal {
            color: #0c4a6e;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
        }

        .theme-santa {
            --bg: #dc2626;
            --bg2: #fee2e2;
            --navy: #7f1d1d;
            --quote-grad-start: #dc2626;
            --quote-grad-end: #991b1b;
            --point-blue: #ffffff;
        }

        .theme-santa .title {
            color: #ffffff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .theme-santa .subtitle {
            color: #ffffff;
            opacity: 1;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .theme-santa .color-scheme span,
        .theme-santa .settings-header h2,
        .theme-santa .titles-header h2,
        .theme-santa .prayer-modal-title,
        .theme-santa .font-preview,
        .theme-santa .settings-tabs .settings-tab,
        .theme-santa .title-name,
        .theme-santa .close-modal,
        .theme-santa .close-prayer-modal {
            color: #7f1d1d;
            text-shadow: none;
        }

        .theme-icecrystal {
            --bg: #e0f2fe;
            --bg2: #f0f9ff;
            --navy: #0c4a6e;
            --quote-grad-start: #38bdf8;
            --quote-grad-end: #cbd5e1;
            --point-blue: #0284c7;
        }

        .theme-icecrystal .title {
            color: #0284c7;
            text-shadow: 0 2px 8px rgba(2, 132, 199, 0.4);
        }

        .theme-icecrystal .subtitle {
            color: #0c4a6e;
            opacity: 0.9;
        }

        .theme-icecrystal .color-scheme span,
        .theme-icecrystal .settings-header h2,
        .theme-icecrystal .titles-header h2,
        .theme-icecrystal .prayer-modal-title,
        .theme-icecrystal .font-preview,
        .theme-icecrystal .settings-tabs .settings-tab,
        .theme-icecrystal .title-name,
        .theme-icecrystal .close-modal,
        .theme-icecrystal .close-prayer-modal {
            color: #0c4a6e;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
        }

        /* Kolory w kolejno≈õci tƒôczy: Czerwony ‚Üí Pomara≈Ñczowy ‚Üí ≈ª√≥≈Çty ‚Üí Zielony ÔøΩÔøΩÔøΩÔøΩ Niebieski ‚Üí Fioletowy ‚Üí Pozosta≈Çe */
        
        .theme-lightrose {
            --bg: #ffe4e6;
            --bg2: #fef2f2;
            --navy: #881337;
            --quote-grad-start: #f43f5e;
            --quote-grad-end: #e11d48;
            --point-blue: #dc2626;
        }

        .theme-pink {
            --bg: #fce7f3;
            --bg2: #fdf2f8;
            --navy: #831843;
            --quote-grad-start: #db2777;
            --quote-grad-end: #ec4899;
            --point-blue: #be185d;
        }

        .theme-ripepumpkin {
            --bg: #ff6b35;
            --bg2: #ffedd5;
            --navy: #7c2d12;
            --quote-grad-start: #ea580c;
            --quote-grad-end: #dc2626;
            --point-blue: #c2410c;
        }

        .theme-orange {
            --bg: #fed7aa;
            --bg2: #fef3c7;
            --navy: #92400e;
            --quote-grad-start: #f59e0b;
            --quote-grad-end: #f97316;
            --point-blue: #d97706;
        }

        .theme-yellow {
            --bg: #fef08a;
            --bg2: #fef9c3;
            --navy: #713f12;
            --quote-grad-start: #eab308;
            --quote-grad-end: #facc15;
            --point-blue: #ca8a04;
        }

        .theme-mustard {
            --bg: #d4a574;
            --bg2: #e8c9a1;
            --navy: #5a3e1b;
            --quote-grad-start: #b8860b;
            --quote-grad-end: #daa520;
            --point-blue: #996515;
        }

        .theme-green {
            --bg: #a7f3d0;
            --bg2: #d1fae5;
            --navy: #064e3b;
            --quote-grad-start: #059669;
            --quote-grad-end: #10b981;
            --point-blue: #047857;
        }

        .theme-moldygreen {
            --bg: #8b9467;
            --bg2: #a8b584;
            --navy: #3d4a2b;
            --quote-grad-start: #6b7c4f;
            --quote-grad-end: #5a6b42;
            --point-blue: #4a5635;
        }

        .theme-saturatedgreen {
            --bg: #E4EB9C;
            --bg2: #f0f4d0;
            --navy: #3d4a2b;
            --quote-grad-start: #8DA750;
            --quote-grad-end: #6b8e3d;
            --point-blue: #5a7a35;
        }

        .theme-grayblue {
            --bg: #cbd5e1;
            --bg2: #e2e8f0;
            --navy: #475569;
            --quote-grad-start: #94a3b8;
            --quote-grad-end: #cbd5e1;
            --point-blue: #64748b;
        }

        .theme-darknavy {
            --bg: #0f172a;
            --bg2: #1e293b;
            --navy: #e0f2fe;
            --quote-grad-start: #1e3a8a;
            --quote-grad-end: #1e40af;
            --point-blue: #3b82f6;
        }

        .theme-darknavy .title {
            color: #bae6fd;
            text-shadow: 0 2px 8px rgba(186, 230, 253, 0.4);
        }

        .theme-darknavy .subtitle {
            color: #bae6fd;
            opacity: 0.8;
        }

        .theme-darknavy .color-scheme span,
        .theme-darknavy .settings-header h2,
        .theme-darknavy .titles-header h2,
        .theme-darknavy .prayer-modal-title,
        .theme-darknavy .font-preview,
        .theme-darknavy .settings-tabs .settings-tab,
        .theme-darknavy .title-name,
        .theme-darknavy .close-modal,
        .theme-darknavy .close-prayer-modal {
            color: #bae6fd;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .theme-holopink {
            --bg: #f5d0fe;
            --bg2: #fae8ff;
            --navy: #701a75;
            --quote-grad-start: #d946ef;
            --quote-grad-end: #f0abfc;
            --point-blue: #c026d3;
        }

        .theme-lightblueturquoise {
            --bg: #a5f3fc;
            --bg2: #cffafe;
            --navy: #164e63;
            --quote-grad-start: #06b6d4;
            --quote-grad-end: #0891b2;
            --point-blue: #0e7490;
        }

        .theme-lightblue {
            --bg: #bfdbfe;
            --bg2: #dbeafe;
            --navy: #1e40af;
            --quote-grad-start: #60a5fa;
            --quote-grad-end: #3b82f6;
            --point-blue: #2563eb;
        }

        .theme-blue {
            --bg: #9fc6e2;
            --bg2: #cfe8f8;
            --navy: #1e3a8a;
            --quote-grad-start: #3b5998;
            --quote-grad-end: #5a8dee;
            --point-blue: #2b7bd6;
        }

        .theme-navy {
            --bg: #93c5fd;
            --bg2: #bfdbfe;
            --navy: #1e3a8a;
            --quote-grad-start: #1e40af;
            --quote-grad-end: #1e3a8a;
            --point-blue: #1d4ed8;
        }

        .theme-purple {
            --bg: #e9d5ff;
            --bg2: #f3e8ff;
            --navy: #581c87;
            --quote-grad-start: #8b5cf6;
            --quote-grad-end: #a855f7;
            --point-blue: #7c3aed;
        }

        .theme-plum {
            --bg: #c8b5d1;
            --bg2: #e6d9ea;
            --navy: #4a2c5a;
            --quote-grad-start: #8e4a9c;
            --quote-grad-end: #6b3775;
            --point-blue: #7a4285;
        }

        .theme-beige {
            --bg: #f7f3e9;
            --bg2: #fdf9f1;
            --navy: #8b4513;
            --quote-grad-start: #e6d7c3;
            --quote-grad-end: #d4b896;
            --point-blue: #c19a6b;
        }

        .theme-tea {
            --bg: #d4b896;
            --bg2: #e8d5b7;
            --navy: #5d4037;
            --quote-grad-start: #8d6e63;
            --quote-grad-end: #6d4c41;
            --point-blue: #795548;
        }

        .theme-gray {
            --bg: #e5e7eb;
            --bg2: #f3f4f6;
            --navy: #111827;
            --quote-grad-start: #4b5563;
            --quote-grad-end: #6b7280;
            --point-blue: #374151;
        }

        .theme-blackwhite {
            --bg: #ffffff;
            --bg2: #f8f9fa;
            --navy: #000000;
            --quote-grad-start: #000000;
            --quote-grad-end: #333333;
            --point-blue: #666666;
        }

        .theme-darkbordeaux {
            --bg: #450a0a;
            --bg2: #7f1d1d;
            --navy: #fecaca;
            --quote-grad-start: #7f1d1d;
            --quote-grad-end: #991b1b;
            --point-blue: #dc2626;
        }

        .theme-darkbordeaux .title {
            color: #fecaca;
            text-shadow: 0 2px 8px rgba(254, 202, 202, 0.4);
        }

        .theme-darkbordeaux .subtitle {
            color: #fecaca;
            opacity: 0.8;
        }

        .theme-darkbordeaux .color-scheme span,
        .theme-darkbordeaux .settings-header h2,
        .theme-darkbordeaux .titles-header h2,
        .theme-darkbordeaux .prayer-modal-title,
        .theme-darkbordeaux .font-preview,
        .theme-darkbordeaux .settings-tabs .settings-tab,
        .theme-darkbordeaux .title-name,
        .theme-darkbordeaux .close-modal,
        .theme-darkbordeaux .close-prayer-modal {
            color: #fecaca;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .theme-rednavycheck {
            --bg: #dbeafe;
            --bg2: #fecaca;
            --navy: #1e3a8a;
            --quote-grad-start: #dc2626;
            --quote-grad-end: #1e40af;
            --point-blue: #991b1c;
        }

        .theme-rednavycheck .title {
            color: #1e3a8a;
            text-shadow: 0 2px 8px rgba(30, 58, 138, 0.4);
        }

        .theme-rednavycheck .subtitle {
            color: #7f1d1d;
            opacity: 0.9;
        }



        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--bg);
            background-size: 400% 400%;
            min-height: 100%;
            padding: 0;
            color: var(--navy);
            overflow-x: hidden;
        }

        @keyframes slideInRight {
            0% {
                transform: translateX(120px) rotateY(15deg);
                opacity: 0;
                filter: blur(8px);
            }
            60% {
                transform: translateX(-10px) rotateY(-2deg);
                opacity: 0.8;
                filter: blur(2px);
            }
            100% {
                transform: translateX(0) rotateY(0deg);
                opacity: 1;
                filter: blur(0px);
            }
        }

        @keyframes headerFloat {
            0% {
                opacity: 0;
                transform: translateY(-30px) scale(0.9);
                filter: blur(5px);
            }
            60% {
                opacity: 0.8;
                transform: translateY(5px) scale(1.02);
                filter: blur(1px);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0px);
            }
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            padding: 5px 15px 80px 15px;
            animation: slideInRight 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .scroll-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--quote-grad-start) 0%, var(--quote-grad-end) 100%);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(59,89,152,0.3);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px) scale(0.8);
            z-index: 1000;
        }

        .scroll-to-top.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }

        .scroll-to-top:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 25px rgba(59,89,152,0.5);
            filter: brightness(1.2);
        }

        .header {
            text-align: center;
            margin-bottom: 10px;
            padding: 5px 20px 0px 20px;
            position: relative;
            animation: headerFloat 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .settings-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            opacity: 1;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .settings-button:hover {
            transform: scale(1.15) rotate(20deg);
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }

        .settings-button.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .title {
            font-family: 'Pacifico', cursive;
            font-size: 1.8rem;
            color: var(--navy);
            margin-bottom: 6px;
            text-shadow: 0 2px 4px rgba(6,21,52,0.12);
        }

        .subtitle {
            font-size: 0.85rem;
            color: var(--navy);
            opacity: 0.7;
            font-weight: 400;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 
                0 8px 32px rgba(6,21,52,0.12),
                0 4px 16px rgba(59,89,152,0.08);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 12px 40px rgba(6,21,52,0.15),
                0 6px 20px rgba(59,89,152,0.1);
        }

        .status-section {
            text-align: center;
            margin-bottom: 20px;
        }

        .status-title {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--navy);
        }

        .countdown {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--navy);
            margin-bottom: 15px;
        }

        .theme-christmas .countdown {
            color: #22c55e;
        }

        .streak-section {
            margin-bottom: 15px;
        }

        .streak-message {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--navy);
            background: rgba(59, 89, 152, 0.08);
            padding: 12px 16px;
            border-radius: 12px;
            border: none;
            text-align: center;
            transition: all 0.3s ease;
        }

        .theme-christmas .streak-message {
            color: #22c55e;
            background: rgba(34, 197, 94, 0.08);
        }

        .lost-streak-message {
            font-size: 0.95rem;
            font-weight: 700;
            color: #dc2626;
            background: rgba(220, 38, 38, 0.08);
            padding: 12px 16px;
            border-radius: 12px;
            border: 2px solid #dc2626;
            text-align: center;
            margin-bottom: 15px;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .streak-message.title-border {
            border: 3px solid var(--title-color) !important;
            box-shadow: 0 0 20px var(--title-glow);
            background: var(--title-bg);
        }

        .current-title {
            font-size: 1rem;
            font-weight: 700;
            text-align: center;
            margin-top: 8px;
            padding: 8px 16px;
            border-radius: 10px;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .current-title.animated {
            background: linear-gradient(270deg, #6b7280, #111827, #374151, #6b7280);
            background-size: 400% 400%;
            animation: flowingGradient 3s ease infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .upcoming-title-notification {
            font-size: 0.9rem;
            font-weight: 700;
            color: white;
            padding: 10px 16px;
            border-radius: 10px;
            text-align: center;
            margin-top: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: var(--quote-grad-start);
            background: linear-gradient(135deg, var(--quote-grad-start), var(--quote-grad-end));
        }

        .draw-button {
            background: linear-gradient(135deg, var(--quote-grad-start) 0%, var(--quote-grad-end) 100%);
            color: white;
            border: none;
            padding: 18px 25px;
            border-radius: 16px;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(59,89,152,0.25);
            font-family: 'Roboto', sans-serif;
            width: 100%;
            text-align: center;
        }

        .draw-button.title-border {
            border: 3px solid var(--title-color) !important;
            box-shadow: 0 6px 20px rgba(59,89,152,0.25), 0 0 20px var(--title-glow);
        }

        .draw-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(59,89,152,0.35);
        }

        .draw-button.title-border:hover {
            box-shadow: 0 10px 30px rgba(59,89,152,0.35), 0 0 25px var(--title-glow);
        }

        .draw-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            animation: none;
        }

        .titles-button {
            background: linear-gradient(135deg, var(--quote-grad-start) 0%, var(--quote-grad-end) 100%);
            color: white;
            border: none;
            padding: 18px 25px;
            border-radius: 16px;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(59,89,152,0.25);
            font-family: 'Roboto', sans-serif;
            width: 100%;
            text-align: center;
        }

        .titles-button.title-border {
            border: 3px solid var(--title-color) !important;
            box-shadow: 0 6px 20px rgba(59,89,152,0.25), 0 0 20px var(--title-glow);
        }

        .titles-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(59,89,152,0.35);
        }

        .titles-button.title-border:hover {
            box-shadow: 0 10px 30px rgba(59,89,152,0.35), 0 0 25px var(--title-glow);
        }

        .result-section {
            margin-top: 30px;
        }

        .result-card {
            background: linear-gradient(135deg, var(--quote-grad-start) 0%, var(--quote-grad-end) 100%);
            color: white;
            border-radius: 18px;
            padding: 20px;
            margin-bottom: 15px;
            text-align: left;
            box-shadow: 0 8px 25px rgba(59,89,152,0.25);
            opacity: 0;
            transform: translateY(30px) scale(0.9) rotateX(10deg);
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .result-card.show {
            opacity: 1;
            transform: translateY(0) scale(1) rotateX(0deg);
        }

        .result-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(59,89,152,0.35);
        }

        .result-title {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            opacity: 0.9;
        }

        .result-content {
            font-size: 1rem;
            line-height: 1.6;
            font-weight: 400;
            font-family: 'Georgia', 'Times New Roman', serif;
            text-align: justify;
        }

        .prayer-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .prayer-subtitle {
            font-size: 0.85rem;
            opacity: 0.8;
            cursor: pointer;
            text-decoration: underline;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .prayer-subtitle:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .drawing-animation {
            background: linear-gradient(135deg, var(--quote-grad-start) 0%, var(--quote-grad-end) 100%);
            color: white;
            border-radius: 18px;
            padding: 25px;
            margin-bottom: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(59,89,152,0.25);
            border: 2px solid rgba(255, 255, 255, 0.1);
            animation: breathe 1s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }

        .drawing-text {
            font-size: 1.2rem;
            font-weight: 700;
            animation: pulse 0.5s infinite alternate;
            position: relative;
            z-index: 2;
        }

        @keyframes pulse {
            from { 
                opacity: 0.7; 
                transform: scale(1);
            }
            to { 
                opacity: 1; 
                transform: scale(1.05);
            }
        }

        .icon {
            width: 24px;
            height: 24px;
            background: var(--point-blue);
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 14px;
        }

        .prayer-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            backdrop-filter: blur(20px);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .prayer-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .prayer-modal-content {
            background: transparent;
            border-radius: 24px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            max-height: 80%;
            overflow-y: auto;
            backdrop-filter: blur(25px);
            box-shadow: 
                0 25px 80px rgba(6,21,52,0.08),
                0 12px 40px rgba(255,255,255,0.15),
                inset 0 1px 0 rgba(255,255,255,0.4),
                0 0 60px rgba(255,255,255,0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transform: scale(0.6) translateY(80px) rotateX(15deg);
            transition: transform 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }

        .prayer-modal-content::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                rgba(255,255,255,0.6) 0%, 
                rgba(255,255,255,0.1) 25%, 
                rgba(255,255,255,0.05) 50%, 
                rgba(255,255,255,0.1) 75%, 
                rgba(255,255,255,0.6) 100%);
            border-radius: 26px;
            z-index: -1;
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        .prayer-modal.show .prayer-modal-content {
            transform: scale(1) translateY(0) rotateX(0deg);
        }

        .prayer-modal-title {
            font-family: 'Pacifico', cursive;
            font-size: 1.5rem;
            color: var(--navy);
            margin-bottom: 20px;
            text-align: center;
        }

        .prayer-modal-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--navy);
            font-family: 'Georgia', 'Times New Roman', serif;
            text-align: justify;
            white-space: pre-line;
        }

        .close-prayer-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--navy);
            opacity: 0.7;
            transition: all 0.3s ease;
        }

        .close-prayer-modal:hover {
            opacity: 1;
            transform: scale(1.2);
        }

        .titles-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            backdrop-filter: blur(20px);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .titles-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .titles-content {
            background: transparent;
            border-radius: 24px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            max-height: 80%;
            overflow-y: auto;
            backdrop-filter: blur(25px);
            box-shadow: 
                0 25px 80px rgba(6,21,52,0.08),
                0 12px 40px rgba(255,255,255,0.15),
                inset 0 1px 0 rgba(255,255,255,0.4),
                0 0 60px rgba(255,255,255,0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transform: scale(0.6) translateY(80px) rotateX(15deg);
            transition: transform 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }

        .titles-content::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                rgba(255,255,255,0.6) 0%, 
                rgba(255,255,255,0.1) 25%, 
                rgba(255,255,255,0.05) 50%, 
                rgba(255,255,255,0.1) 75%, 
                rgba(255,255,255,0.6) 100%);
            border-radius: 26px;
            z-index: -1;
            animation: shimmer 3s ease-in-out infinite;
        }

        .titles-content::-webkit-scrollbar {
            width: 8px;
        }

        .titles-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .titles-content::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .titles-content::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .titles-modal.show .titles-content {
            transform: scale(1) translateY(0) rotateX(0deg);
        }

        .titles-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .titles-header h2 {
            font-family: 'Pacifico', cursive;
            font-size: 1.8rem;
            color: var(--navy);
            margin-bottom: 10px;
        }

        .titles-subtitle {
            color: var(--navy);
            opacity: 0.8;
            font-size: 1rem;
        }

        .title-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(6,21,52,0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            position: relative;
            opacity: 0;
            transform: translateX(30px) rotateY(10deg);
            animation: slideInCard 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        .title-card:hover {
            transform: translateY(-8px) rotateY(5deg) scale(1.02);
            box-shadow: 0 15px 40px rgba(6,21,52,0.2);
            filter: brightness(1.05);
        }

        @keyframes slideInCard {
            0% {
                opacity: 0;
                transform: translateX(60px) rotateY(25deg) scale(0.8);
                filter: blur(8px);
            }
            30% {
                opacity: 0.6;
                transform: translateX(-15px) rotateY(-8deg) scale(1.05);
                filter: blur(3px);
            }
            70% {
                opacity: 0.9;
                transform: translateX(5px) rotateY(3deg) scale(1.02);
                filter: blur(1px);
            }
            100% {
                opacity: 1;
                transform: translateX(0) rotateY(0deg) scale(1);
                filter: blur(0px);
            }
        }

        .title-card.unlocked {
            border: 2px solid rgba(34, 197, 94, 0.3);
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.1);
        }

        .title-card.unlocked:hover {
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.2);
        }

        .title-card.locked {
            opacity: 0.7;
        }

        .title-name {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 8px;
            color: var(--navy);
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            z-index: 2;
        }

        .theme-christmas .title-name {
            color: #dc2626 !important;
            text-shadow: none !important;
        }

        .title-name.animated {
            background: linear-gradient(270deg, #6b7280, #111827, #374151, #6b7280);
            background-size: 400% 400%;
            animation: flowingGradient 3s ease infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .theme-christmas .title-name.animated {
            color: #dc2626 !important;
            text-shadow: none !important;
            background: none !important;
            -webkit-background-clip: unset !important;
            -webkit-text-fill-color: #dc2626 !important;
            background-clip: unset !important;
        }

        .title-icon {
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05), 0 1px 4px rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            animation: breathe 5s ease-in-out infinite;
        }

        .title-icon:hover {
            transform: scale(1.2) rotate(15deg);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .title-icon img {
            width: 24px;
            height: 24px;
            object-fit: cover;
            border-radius: 3px;
        }

        .title-requirement {
            font-size: 0.9rem;
            color: var(--navy);
            opacity: 0.7;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }

        .title-progress {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            height: 8px;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }

        .title-progress-bar {
            height: 100%;
            background: var(--gradient);
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 8px;
            position: relative;
        }

        .title-progress-bar.animated {
            background: linear-gradient(270deg, #6b7280, #111827, #374151, #6b7280);
            background-size: 400% 400%;
            animation: flowingGradient 3s ease infinite;
        }

        .title-status {
            font-weight: 700;
            font-size: 0.9rem;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .title-status.unlocked {
            color: #22c55e;
            animation: breathe 3s ease-in-out infinite;
        }

        .title-status.locked {
            color: #6b7280;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--navy);
            opacity: 0.7;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            opacity: 1;
            transform: scale(1.2);
        }

        .settings-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            backdrop-filter: blur(20px);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .settings-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .settings-content {
            background: transparent;
            border-radius: 24px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            max-height: 80%;
            overflow-y: auto;
            backdrop-filter: blur(25px);
            box-shadow: 
                0 25px 80px rgba(6,21,52,0.08),
                0 12px 40px rgba(255,255,255,0.15),
                inset 0 1px 0 rgba(255,255,255,0.4),
                0 0 60px rgba(255,255,255,0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transform: scale(0.9) translateY(20px);
            opacity: 0;
            transition: all 0.3s ease;
            position: relative;
        }

        .settings-content::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                rgba(255,255,255,0.6) 0%, 
                rgba(255,255,255,0.1) 25%, 
                rgba(255,255,255,0.05) 50%, 
                rgba(255,255,255,0.1) 75%, 
                rgba(255,255,255,0.6) 100%);
            border-radius: 26px;
            z-index: -1;
            animation: shimmer 3s ease-in-out infinite;
        }

        .settings-modal.show .settings-content {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        .color-schemes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .color-scheme {
            opacity: 0;
            transform: translateY(20px) scale(0.8);
            animation: colorSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes colorSlideIn {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.8) rotateY(-10deg);
                filter: blur(4px);
            }
            60% {
                opacity: 0.8;
                transform: translateY(-5px) scale(1.05) rotateY(5deg);
                filter: blur(1px);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1) rotateY(0deg);
                filter: blur(0px);
            }
        }



        .color-scheme {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .font-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .settings-header {
            text-align: center;
            margin-bottom: 15px;
        }

        .settings-header h2 {
            font-family: 'Pacifico', cursive;
            font-size: 1.8rem;
            color: var(--navy);
            margin-bottom: 5px;
        }

        .settings-subtitle {
            color: var(--navy);
            opacity: 0.8;
            font-size: 1rem;
        }

        .settings-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            padding: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .settings-tab {
            flex: 1;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 10px;
            font-weight: 700;
            color: var(--navy);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .settings-tab.active {
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            color: var(--navy);
            border-color: var(--point-blue);
            border-width: 2px;
            transform: translateY(-2px);
        }

        .settings-tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.5);
            border-color: rgba(255, 255, 255, 0.7);
            transform: translateY(-1px);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .settings-section {
            margin-bottom: 30px;
        }

        .settings-section-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--navy);
            margin-bottom: 15px;
            text-align: center;
        }

        .color-scheme {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .font-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .font-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .font-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .font-option.active {
            border-color: var(--point-blue);
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 4px 15px rgba(43, 123, 214, 0.3);
        }

        .font-preview {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--navy);
        }

        .font-name {
            font-size: 1rem;
            font-weight: 600;
            color: var(--navy);
            opacity: 0.8;
        }

        .font-elegancka {
            font-family: 'Georgia', 'Times New Roman', serif;
        }

        .font-zawijasy {
            font-family: 'Pacifico', cursive;
        }

        .font-prosta {
            font-family: 'Arial', sans-serif;
        }

        .font-nowoczesna {
            font-family: 'Roboto', sans-serif;
        }

        .color-scheme:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .color-scheme.active {
            border-color: var(--point-blue);
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 15px rgba(43, 123, 214, 0.3);
        }

        .color-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.4);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .color-scheme:hover .color-preview {
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.8);
        }

        .color-scheme.active .color-preview {
            transform: scale(1.05);
            border-color: var(--point-blue);
            border-width: 3px;
        }

        .color-scheme span {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--navy);
            text-align: center;
            opacity: 1;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px 10px 15px 10px;
                max-width: 100%;
            }

            .header {
                padding: 18px;
                margin-bottom: 25px;
            }
            
            .title {
                font-size: 1.9rem;
            }

            .subtitle {
                font-size: 0.9rem;
            }
            
            .card {
                padding: 20px;
                margin-bottom: 15px;
                border-radius: 18px;
            }

            .draw-button, .titles-button {
                padding: 16px 20px;
                font-size: 1rem;
            }

            .result-card {
                padding: 18px;
                margin-bottom: 12px;
            }

            .result-title {
                font-size: 0.95rem;
            }

            .result-content {
                font-size: 1.05rem;
            }

            .streak-message {
                padding: 10px 16px;
                font-size: 0.9rem;
            }

            .current-title {
                font-size: 0.95rem;
                padding: 8px 16px;
            }

            .titles-content, .prayer-modal-content, .settings-content {
                padding: 20px;
                width: 95%;
                max-height: 85%;
            }

            .titles-header h2 {
                font-size: 1.8rem;
            }

            .settings-header h2 {
                font-size: 1.6rem;
            }

            .color-schemes {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .color-scheme {
                padding: 10px;
            }

            .color-preview {
                width: 35px;
                height: 35px;
            }

            .settings-button {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }



            .settings-tabs {
                margin-bottom: 20px;
            }

            .settings-tab {
                padding: 10px 15px;
                font-size: 0.9rem;
            }

            .font-option {
                padding: 15px;
            }

            .font-preview {
                font-size: 1.2rem;
            }

            .font-name {
                font-size: 0.9rem;
            }
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes flowingGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container">
   <div class="header">
    <h1 class="title" id="mainTitle">Dyskretna Intencja</h1>
    <p class="subtitle">Codzienna modlitwa i intencja o p√≥≈Çnocy</p><button class="settings-button" id="settingsButton" onclick="showSettingsModal()">‚öôÔ∏è</button>
   </div>
   <div class="card">
    <div class="status-section">
     <div id="streakSection" class="streak-section" style="display: none;">
      <div class="streak-message" id="streakMessage"></div>
      <div class="current-title" id="currentTitle" style="display: none;"></div>
     </div>
     <div id="countdownSection" class="countdown-section" style="display: none;">
      <div class="status-title">
       Nastƒôpne losowanie za:
      </div>
      <div class="countdown" id="countdown">
       ≈Åadowanie...
      </div>
     </div><button class="draw-button" id="drawButton" onclick="startDrawing()"> Losuj intencjƒô i modlitwÔøΩÔøΩ </button>
    </div>
    <div id="drawingArea"></div>
    <div id="resultsArea"></div>
   </div>
   <div class="card"><button class="titles-button" id="titlesButton" onclick="showTitlesModal()"> üèÜ Tytu≈Çy Dyskretniaka </button>
   </div>
  </div><button class="scroll-to-top" id="scrollToTop" onclick="scrollToTop()">‚Üë</button> <!-- Modal tytu≈Ç√≥w -->
  <div class="titles-modal" id="titlesModal">
   <div class="titles-content"><button class="close-modal" onclick="hideTitlesModal()">√ó</button>
    <div class="titles-header">
     <h2>üèÜ Tytu≈Çy Dyskretniaka</h2>
     <p class="titles-subtitle">Zdobywaj tytu≈Çy poprzez codziennƒÖ passƒô modlitwy!</p>
    </div>
    <div id="titlesContainer"></div>
   </div>
  </div><!-- Modal modlitwy -->
  <div class="prayer-modal" id="prayerModal">
   <div class="prayer-modal-content"><button class="close-prayer-modal" onclick="hidePrayerModal()">ÔøΩÔøΩÔøΩ</button>
    <div class="prayer-modal-title" id="prayerModalTitle"></div>
    <div class="prayer-modal-text" id="prayerModalText"></div>
   </div>
  </div><!-- Modal ustawie≈Ñ -->
  <div class="settings-modal" id="settingsModal">
   <div class="settings-content"><button class="close-modal" onclick="hideSettingsModal()">√ó</button>
    <div class="settings-header">
     <h2>Dostosuj wyglƒÖd aplikacji</h2>
    </div>
    <div class="settings-tabs"><button class="settings-tab active" onclick="switchTab('colors')">Schemat kolor√≥w</button> <button class="settings-tab" onclick="switchTab('seasonal')">Motywy Sezonowe</button>
    </div>
    <div id="colorsTab" class="tab-content active">
     <div class="settings-section">
      <h3 class="settings-section-title">Schemat kolor√≥w</h3>
      <div class="color-schemes" id="colorSchemesContainer">
       <div class="color-scheme" data-theme="lightrose" onclick="changeColorScheme('lightrose')" style="animation-delay: 0s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #ffe4e6, #f43f5e);"></div><span>Jasny R√≥≈ºany</span>
       </div>
       <div class="color-scheme" data-theme="pink" onclick="changeColorScheme('pink')" style="animation-delay: 0.05s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #fce7f3, #db2777);"></div><span>R√≥≈ºowy</span>
       </div>
       <div class="color-scheme" data-theme="ripepumpkin" onclick="changeColorScheme('ripepumpkin')" style="animation-delay: 0.15s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #ff6b35, #dc2626);"></div><span>Dojrza≈Ça Dynia</span>
       </div>
       <div class="color-scheme" data-theme="orange" onclick="changeColorScheme('orange')" style="animation-delay: 0.2s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #fed7aa, #f59e0b);"></div><span>Pomara≈Ñczowy</span>
       </div>
       <div class="color-scheme" data-theme="yellow" onclick="changeColorScheme('yellow')" style="animation-delay: 0.25s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #fef08a, #eab308);"></div><span>≈ª√≥≈Çty</span>
       </div>
       <div class="color-scheme" data-theme="mustard" onclick="changeColorScheme('mustard')" style="animation-delay: 0.3s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #d4a574, #b8860b);"></div><span>Musztardziany</span>
       </div>
       <div class="color-scheme" data-theme="green" onclick="changeColorScheme('green')" style="animation-delay: 0.35s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #a7f3d0, #059669);"></div><span>Zielony</span>
       </div>
       <div class="color-scheme" data-theme="moldygreen" onclick="changeColorScheme('moldygreen')" style="animation-delay: 0.4s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #8b9467, #6b7c4f);"></div><span>Sple≈õnia≈Ça ziele≈Ñ</span>
       </div>
       <div class="color-scheme" data-theme="lightblueturquoise" onclick="changeColorScheme('lightblueturquoise')" style="animation-delay: 0.5s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #a5f3fc, #06b6d4);"></div><span>Jasny Niebieski Turkusowy</span>
       </div>
       <div class="color-scheme" data-theme="lightblue" onclick="changeColorScheme('lightblue')" style="animation-delay: 0.6s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #bfdbfe, #60a5fa);"></div><span>Jasny b≈Çƒôkit</span>
       </div>
       <div class="color-scheme" data-theme="blue" onclick="changeColorScheme('blue')" style="animation-delay: 0.65s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #9fc6e2, #3b5998);"></div><span>Niebieski</span>
       </div>
       <div class="color-scheme" data-theme="navy" onclick="changeColorScheme('navy')" style="animation-delay: 0.7s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #93c5fd, #1e3a8a);"></div><span>Granatowy</span>
       </div>
       <div class="color-scheme" data-theme="purple" onclick="changeColorScheme('purple')" style="animation-delay: 0.8s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #e9d5ff, #8b5cf6);"></div><span>Fioletowy</span>
       </div>
       <div class="color-scheme" data-theme="plum" onclick="changeColorScheme('plum')" style="animation-delay: 0.85s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #c8b5d1, #4a2c5a);"></div><span>≈öliwkowy</span>
       </div>
       <div class="color-scheme" data-theme="beige" onclick="changeColorScheme('beige')" style="animation-delay: 0.9s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #f7f3e9, #e6d7c3);"></div><span>Be≈ºowy</span>
       </div>
       <div class="color-scheme" data-theme="tea" onclick="changeColorScheme('tea')" style="animation-delay: 0.95s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #d4b896, #5d4037);"></div><span>Spienione Latte</span>
       </div>
       <div class="color-scheme" data-theme="gray" onclick="changeColorScheme('gray')" style="animation-delay: 1s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #e5e7eb, #4b5563);"></div><span>Szary</span>
       </div>
       <div class="color-scheme" data-theme="blackwhite" onclick="changeColorScheme('blackwhite')" style="animation-delay: 1.05s;">
        <div class="color-preview" style="background: linear-gradient(135deg, #ffffff, #000000);"></div><span>Czarno-bia≈Çy</span>
       </div>
      </div>
     </div>
    </div>
    <div id="seasonalTab" class="tab-content">
     <div class="settings-section">
      <h3 class="settings-section-title">Motywy Sezonowe</h3>
      <div class="color-schemes" id="seasonalSchemesContainer">
       <div class="color-scheme" data-theme="christmas" onclick="changeColorScheme('christmas')">
        <div class="color-preview" style="background: linear-gradient(135deg, #1a472a 0%, #c41e3a 100%);"></div><span>üéÑ ≈öwiƒÖteczna Harmonia<br><small style="font-size: 0.75rem; opacity: 0.8;">Do 1 Stycznia</small></span>
       </div>
       <div class="color-scheme" data-theme="snow" onclick="changeColorScheme('snow')">
        <div class="color-preview" style="background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 50%, #ffffff 100%);"></div><span>‚ùÑÔ∏è ≈önie≈ºna Zadyma<br><small style="font-size: 0.75rem; opacity: 0.8;">Do 2 Lutego</small></span>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
        const prayers = [
            {
                title: "Ojcze nasz",
                text: "Ojcze nasz, kt√≥ry≈õ jest w niebie,\n≈õwiƒôƒá siƒô Imiƒô Twoje,\nprzyjd≈∫ Kr√≥lestwo Twoje,\nbƒÖd≈∫ wola Twoja jako w niebie, tak i na ziemi.\nChleba naszego powszedniego daj nam dzisiaj\ni odpu≈õƒá nam nasze winy,\njako i my odpuszczamy naszym winowajcom.\nI nie w√≥d≈∫ nas na pokuszenie,\nale nas zbaw ode z≈Çego. Amen."
            },
            {
                title: "Zdrowa≈õ Maryjo",
                text: "Zdrowa≈õ Maryjo, ≈Çaski pe≈Çna,\nPan z TobƒÖ,\nb≈Çogos≈Çawiona≈õ Ty miƒôdzy niewiastami\ni b≈Çogos≈Çawiony owoc ≈ºywota Twojego, Jezus.\n≈öwiƒôta Maryjo, Matko Bo≈ºa,\nm√≥dl siƒô za nami grzesznymi,\nteraz i w godzinƒô ≈õmierci naszej. Amen."
            },
            {
                title: "Chwa≈Ça Ojcu",
                text: "Chwa≈Ça Ojcu i Synowi, i Duchowi ≈öwiƒôtemu,\njak by≈Ça na poczƒÖtku, teraz i zawsze,\ni na wieki wiek√≥w. Amen."
            },
            {
                title: "Wierzƒô w Boga (Sk≈Çad Apostolski)",
                text: "Wierzƒô w Boga, Ojca WszechmogƒÖcego,\nStworzyciela nieba i ziemi,\ni w Jezusa Chrystusa, Syna Jego jedynego, Pana naszego,\nkt√≥ry siƒô poczƒÖ≈Ç z Ducha ≈öwiƒôtego,\nnarodzi≈Ç siƒô z Maryi Panny,\numƒôczony pod Ponckim Pi≈Çatem,\nukrzy≈ºowany, umar≈Ç i pogrzebiony;\nzstƒÖpi≈Ç do piekie≈Ç, trzeciego dnia zmartwychwsta≈Ç;\nwstƒÖpi≈Ç na niebiosa, siedzi po prawicy Boga Ojca WszechmogƒÖcego,\nstamtƒÖd przyjdzie sƒÖdziƒá ≈ºywych i umar≈Çych.\nWierzƒô w Ducha ≈öwiƒôtego,\n≈õwiƒôty Ko≈õci√≥≈Ç powszechny,\n≈õwiƒôtych obcowanie, grzech√≥w odpuszczenie,\ncia≈Ça zmartwychwstanie, ≈ºywot wieczny. Amen."
            },
            {
                title: "Pod TwojƒÖ obronƒô",
                text: "Pod TwojƒÖ obronƒô uciekamy siƒô, ≈öwiƒôta Bo≈ºa Rodzicielko,\nnaszymi pro≈õbami racz nie gardziƒá w potrzebach naszych,\nale od wszelakich z≈Çych przyg√≥d racz nas zawsze wybawiaƒá,\nPanno chwalebna i b≈Çogos≈Çawiona.\nO Pani nasza, Orƒôdowniczko nasza, Po≈õredniczko nasza, Pocieszycielko nasza,\nSynem swoim nas pojednaj, Synowi swojemu nas polecaj,\nswojemu Synowi nas oddawaj. Amen."
            },
            {
                title: "Aniele Bo≈ºy, Str√≥≈ºu m√≥j",
                text: "Aniele Bo≈ºy, Str√≥≈ºu m√≥j,\nTy zawsze przy mnie st√≥j,\nrano, wiecz√≥r, we dnie, w nocy,\nbƒÖd≈∫ mi zawsze ku pomocy.\nStrze≈º duszy, cia≈Ça mego,\nzaprowad≈∫ mnie do ≈ºywota wiecznego. Amen."
            },
            {
                title: "Modlitwa do Ducha ≈öwiƒôtego",
                text: "Duchu ≈öwiƒôty, przyjd≈∫,\nnape≈Çnij serca swoich wiernych\ni zapal w nich ogie≈Ñ swojej mi≈Ço≈õci.\nZe≈õlij Ducha swego, a powstanie ≈ºycie,\ni odnowisz oblicze ziemi. Amen."
            },
            {
                title: "Jezu, ufam Tobie",
                text: "Jezu, ufam Tobie!"
            },
            {
                title: "≈öwiƒôty Bo≈ºe",
                text: "≈öwiƒôty Bo≈ºe, ≈öwiƒôty mocny,\n≈öwiƒôty a Nie≈õmiertelny,\nzmi≈Çuj siƒô nad nami i nad ca≈Çym ≈õwiatem."
            },
            {
                title: "Baranku Bo≈ºy",
                text: "Baranku Bo≈ºy, kt√≥ry g≈Çadzisz grzechy ≈õwiata,\nzmi≈Çuj siƒô nad nami.\nBaranku Bo≈ºy, kt√≥ry g≈Çadzisz grzechy ≈õwiata,\nzmi≈Çuj siƒô nad nami.\nBaranku Bo≈ºy, kt√≥ry g≈Çadzisz grzechy ≈õwiata,\nobdarz nas pokojem."
            },
            {
                title: "Panie, nie jestem godzien",
                text: "Panie, nie jestem godzien,\naby≈õ przyszed≈Ç do mnie,\nale powiedz tylko s≈Çowo,\na bƒôdzie uzdrowiona dusza moja."
            },
            {
                title: "O Krwi i Wodo",
                text: "O Krwi i Wodo, kt√≥ra≈õ wyp≈Çynƒô≈Ça\nz Naj≈õwiƒôtszego Serca Jezusowego\njako zdr√≥j mi≈Çosierdzia dla nas,\nufam Tobie."
            },
            {
                title: "Bo≈ºe, bƒÖd≈∫ mi≈Ço≈õciw mnie grzesznemu",
                text: "Bo≈ºe, bƒÖd≈∫ mi≈Ço≈õciw mnie grzesznemu!"
            },
            {
                title: "≈öwiƒôty, ≈öwiƒôty, ≈öwiƒôty Pan B√≥g Zastƒôp√≥w",
                text: "≈öwiƒôty, ≈öwiƒôty, ≈öwiƒôty Pan B√≥g Zastƒôp√≥w.\nPe≈Çne sƒÖ niebiosa i ziemia chwa≈Çy Twojej.\nHosanna na wysoko≈õci!"
            },
            {
                title: "Serce Jezusa, ufam Tobie",
                text: "Serce Jezusa, ufam Tobie!"
            },
            {
                title: "Apel JasnogÔøΩÔøΩrski",
                text: "Maryjo, Kr√≥lowo Polski,\njestem przy Tobie, pamiƒôtam, czuwam."
            }
        ];

        const intentions = [
            "Za ksiƒôdza proboszcza i wszystkich ksiƒô≈ºy z naszej parafii",
            "Za losowƒÖ osobƒô korzystajƒÖcƒÖ z aplikacji Dyskretna Intencja",
            "Za dusze cierpiƒÖce w Czy≈õƒácu",
            "Za pok√≥j na ≈õwiecie i w naszych sercach",
            "Za chorych i cierpiƒÖcych w naszej wsp√≥lnocie",
            "Za jedno≈õƒá rodzin i ma≈Ç≈ºe≈Ñstw",
            "Za m≈Çodzie≈º i ich przysz≈Ço≈õƒá",
            "Za osoby samotne i opuszczone",
            "Za nawr√≥cenie grzesznik√≥w",
            "Za kap≈Çan√≥w i osoby konsekrowane",
            "Za rodzic√≥w i dzieci",
            "Za bezrobotnych i potrzebujƒÖcych",
            "Za pok√≥j w rodzinach",
            "Za osoby w depresji i smutku",
            "Za misjonarzy na ca≈Çym ≈õwiecie",
            "Za papie≈ºa i hierarchiƒô Ko≈õcio≈Ça",
            "Za osoby uzale≈ºnione i ich rodziny",
            "Za dzieci nienarodzonych",
            "Za osoby starsze i samotne",
            "Za jedno≈õƒá chrze≈õcijan",
            "Za prze≈õladowanych za wiarƒô",
            "Za osoby poszukujƒÖce Boga",
            "Za nauczycieli i wychowawc√≥w",
            "Za lekarzy i s≈Çu≈ºbƒô zdrowia",
            "Za pok√≥j miƒôdzy narodami",
            "Za ochronƒô ≈õrodowiska naturalnego",
            "Za osoby w ≈ºa≈Çobie",
            "Za wiƒô≈∫ni√≥w i ich rodziny",
            "Za osoby bezdomne",
            "Za wszystkich wiernych zmar≈Çych"
        ];

        // Globalne zmienne
        let lastDrawDate, todaysPrayer, todaysIntention, drawHistory, currentStreak, lastStreakDate, unlockedTitles;
        let currentPrayerData = null;

        // Funkcja bezpiecznego ≈Çadowania danych z localStorage
        function loadData() {
            try {
                lastDrawDate = localStorage.getItem('lastDrawDate');
                todaysPrayer = localStorage.getItem('todaysPrayer');
                todaysIntention = localStorage.getItem('todaysIntention');
                const historyData = localStorage.getItem('drawHistory');
                drawHistory = historyData ? JSON.parse(historyData) : [];
                
                currentStreak = parseInt(localStorage.getItem('currentStreak') || '0');
                lastStreakDate = localStorage.getItem('lastStreakDate');
                
                const unlockedTitlesData = localStorage.getItem('unlockedTitles');
                unlockedTitles = unlockedTitlesData ? JSON.parse(unlockedTitlesData) : [];
                
                checkStreakContinuity();
                
                console.log('Za≈Çadowane dane:', {
                    lastDrawDate,
                    todaysPrayer: todaysPrayer ? 'tak' : 'nie',
                    todaysIntention: todaysIntention ? 'tak' : 'nie',
                    historyLength: drawHistory.length,
                    currentStreak,
                    unlockedTitles: unlockedTitles.length,
                    secretUnlocked
                });
            } catch (e) {
                console.log('B≈ÇƒÖd ≈Çadowania danych:', e);
                drawHistory = [];
                currentStreak = 0;
                unlockedTitles = [];
                secretUnlocked = false;
            }
        }

        // Za≈Çaduj dane przy starcie
        loadData();

        function checkStreakContinuity() {
            if (!lastStreakDate) return;
            
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const lastDate = new Date(lastStreakDate);
            const lastStreakDay = new Date(lastDate.getFullYear(), lastDate.getMonth(), lastDate.getDate());
            
            const diffTime = today - lastStreakDay;
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            // Je≈õli minƒô≈Ço wiƒôcej ni≈º 1 dzie≈Ñ od ostatniego losowania, resetuj passƒô
            if (diffDays > 1) {
                const lostStreak = currentStreak;
                currentStreak = 0;
                lastDrawDate = null;
                console.log('Passa zresetowana - minƒô≈Ço wiƒôcej ni≈º 1 dzie≈Ñ');
                localStorage.setItem('lostStreak', lostStreak.toString());
                localStorage.setItem('currentStreak', '0');
                localStorage.setItem('lastDrawDate', '');
            }
        }

        const titles = [
            { 
                days: 2, 
                name: "Nowicjusz", 
                christmasName: "Ma≈Çy Pomocnik ≈öwiƒôtego Miko≈Çaja",
                snowName: "Pierwszy P≈Çatek ÔøΩÔøΩniegu",
                gradient: "linear-gradient(135deg, #fbbf24, #f59e0b)", 
                christmasGradient: "linear-gradient(135deg, #c41e3a, #dc2626)",
                snowGradient: "linear-gradient(135deg, #e0f2fe, #bae6fd)",
                borderColor: "#fbbf24", 
                christmasBorderColor: "#c41e3a",
                snowBorderColor: "#bae6fd",
                glowColor: "rgba(251, 191, 36, 0.3)", 
                christmasGlowColor: "rgba(196, 30, 58, 0.3)",
                snowGlowColor: "rgba(186, 230, 253, 0.5)",
                icon: "üèÜ", 
                christmasIcon: "üéÖ",
                snowIcon: "‚ùÑÔ∏è",
                unlocked: false 
            },
            { 
                days: 5, 
                name: "Ucze≈Ñ Wytrwa≈Ço≈õci", 
                christmasName: "Stra≈ºnik Adwentu",
                snowName: "Mro≈∫ny Wƒôdrowiec",
                gradient: "linear-gradient(135deg, #3b82f6, #1d4ed8)", 
                christmasGradient: "linear-gradient(135deg, #22c55e, #16a34a)",
                snowGradient: "linear-gradient(135deg, #bae6fd, #0ea5e9)",
                borderColor: "#3b82f6", 
                christmasBorderColor: "#22c55e",
                snowBorderColor: "#0ea5e9",
                glowColor: "rgba(59, 130, 246, 0.3)", 
                christmasGlowColor: "rgba(34, 197, 94, 0.3)",
                snowGlowColor: "rgba(14, 165, 233, 0.4)",
                icon: "üèÜ", 
                christmasIcon: "üïØÔ∏è",
                snowIcon: "‚õÑ",
                unlocked: false 
            },
            { 
                days: 10, 
                name: "Wytrwa≈Çy Praktykant", 
                christmasName: "Wielbiciel Szopki",
                snowName: "Mistrz Sopli Lodowych",
                gradient: "linear-gradient(135deg, #ec4899, #be185d)", 
                christmasGradient: "linear-gradient(135deg, #8b4513, #d4a574)",
                snowGradient: "linear-gradient(135deg, #ffffff, #cbd5e1)",
                borderColor: "#ec4899", 
                christmasBorderColor: "#8b4513",
                snowBorderColor: "#cbd5e1",
                glowColor: "rgba(236, 72, 153, 0.3)", 
                christmasGlowColor: "rgba(139, 69, 19, 0.3)",
                snowGlowColor: "rgba(203, 213, 225, 0.5)",
                icon: "üèÜ", 
                christmasIcon: "‚≠ê",
                snowIcon: "üßä",
                unlocked: false 
            },
            { 
                days: 15, 
                name: "Ogarniƒôty Dyskretniak", 
                christmasName: "≈önie≈ºny Anio≈Ç",
                snowName: "Lodowy Anio≈Ç",
                gradient: "linear-gradient(135deg, #f97316, #ea580c)", 
                christmasGradient: "linear-gradient(135deg, #ffffff, #e0f2fe)",
                snowGradient: "linear-gradient(135deg, #f0f9ff, #e0f2fe)",
                borderColor: "#f97316", 
                christmasBorderColor: "#ffffff",
                snowBorderColor: "#e0f2fe",
                glowColor: "rgba(249, 115, 22, 0.3)", 
                christmasGlowColor: "rgba(255, 255, 255, 0.5)",
                snowGlowColor: "rgba(224, 242, 254, 0.6)",
                icon: "ÔøΩÔøΩ", 
                christmasIcon: "üëº",
                snowIcon: "üëº",
                unlocked: false 
            },
            { 
                days: 20, 
                name: "Mistrz Rutyny", 
                christmasName: "Stra≈ºnik Choinki",
                snowName: "Architekt Ba≈Çwana",
                gradient: "linear-gradient(135deg, #8b5cf6, #7c3aed)", 
                christmasGradient: "linear-gradient(135deg, #15803d, #22c55e)",
                snowGradient: "linear-gradient(135deg, #ffffff, #94a3b8)",
                borderColor: "#8b5cf6", 
                christmasBorderColor: "#15803d",
                snowBorderColor: "#94a3b8",
                glowColor: "rgba(139, 92, 246, 0.3)", 
                christmasGlowColor: "rgba(21, 128, 61, 0.3)",
                snowGlowColor: "rgba(148, 163, 184, 0.4)",
                icon: "üèÜ", 
                christmasIcon: "üéÑ",
                snowIcon: "‚òÉÔ∏è",
                unlocked: false 
            },
            { 
                days: 25, 
                name: "≈öwiat≈Ço Dyskrecji", 
                christmasName: "NiosƒÖcy ≈öwiat≈Ço Betlejemskie",
                snowName: "Kryszta≈Çowy Stra≈ºnik",
                gradient: "linear-gradient(135deg, #ef4444, #dc2626)", 
                christmasGradient: "linear-gradient(135deg, #fbbf24, #f59e0b)",
                snowGradient: "linear-gradient(135deg, #bae6fd, #ffffff)",
                borderColor: "#ef4444", 
                christmasBorderColor: "#fbbf24",
                snowBorderColor: "#bae6fd",
                glowColor: "rgba(239, 68, 68, 0.3)", 
                christmasGlowColor: "rgba(251, 191, 36, 0.5)",
                snowGlowColor: "rgba(186, 230, 253, 0.6)",
                icon: "üèÜ", 
                christmasIcon: "üïØÔ∏è",
                snowIcon: "üíé",
                unlocked: false 
            },
            { 
                days: 30, 
                name: "Duchowny Weteran", 
                christmasName: "Pasterz Wigilii",
                snowName: "W≈Çadca Zamieci",
                gradient: "linear-gradient(135deg, #fbbf24, #f59e0b)", 
                christmasGradient: "linear-gradient(135deg, #8b4513, #cd853f)",
                snowGradient: "linear-gradient(135deg, #0284c7, #38bdf8)",
                borderColor: "#fbbf24", 
                christmasBorderColor: "#8b4513",
                snowBorderColor: "#0284c7",
                glowColor: "rgba(251, 191, 36, 0.3)", 
                christmasGlowColor: "rgba(139, 69, 19, 0.3)",
                snowGlowColor: "rgba(2, 132, 199, 0.4)",
                icon: "üèÜ", 
                christmasIcon: "üêë",
                snowIcon: "üå®Ô∏è",
                unlocked: false 
            },
            { 
                days: 35, 
                name: "≈öwiadek Tajemnicy", 
                christmasName: "Mƒôdrec ze Wschodu",
                snowName: "≈önie≈ºna Kr√≥lowa",
                gradient: "linear-gradient(135deg, #60a5fa, #1e40af)", 
                christmasGradient: "linear-gradient(135deg, #6366f1, #8b5cf6)",
                snowGradient: "linear-gradient(135deg, #e0f2fe, #60a5fa)",
                borderColor: "#60a5fa", 
                christmasBorderColor: "#6366f1",
                snowBorderColor: "#60a5fa",
                glowColor: "rgba(96, 165, 250, 0.3)", 
                christmasGlowColor: "rgba(99, 102, 241, 0.3)",
                snowGlowColor: "rgba(96, 165, 250, 0.5)",
                icon: "üèÜ", 
                christmasIcon: "üëë",
                snowIcon: "üëë",
                unlocked: false 
            },
            { 
                days: 40, 
                name: "Wytrawny Skromniak", 
                christmasName: "Dzwoneczek Rado≈õci",
                snowName: "Zimowy Wiatr",
                gradient: "linear-gradient(135deg, #a855f7, #ec4899)", 
                christmasGradient: "linear-gradient(135deg, #ffd700, #ffed4e)",
                snowGradient: "linear-gradient(135deg, #bae6fd, #cbd5e1)",
                borderColor: "#a855f7", 
                christmasBorderColor: "#ffd700",
                snowBorderColor: "#bae6fd",
                glowColor: "rgba(168, 85, 247, 0.3)", 
                christmasGlowColor: "rgba(255, 215, 0, 0.4)",
                snowGlowColor: "rgba(186, 230, 253, 0.5)",
                icon: "üèÜ", 
                christmasIcon: "üîî",
                snowIcon: "üí®",
                unlocked: false 
            },
            { 
                days: 45, 
                name: "Zakulisowy Modlitewnik", 
                christmasName: "Nocny Kolƒôdnik",
                snowName: "≈öpiewak Mrozu",
                gradient: "linear-gradient(135deg, #ef4444, #fbbf24)", 
                christmasGradient: "linear-gradient(135deg, #1e3a8a, #3b82f6)",
                snowGradient: "linear-gradient(135deg, #0ea5e9, #38bdf8)",
                borderColor: "#ef4444", 
                christmasBorderColor: "#1e3a8a",
                snowBorderColor: "#0ea5e9",
                glowColor: "rgba(239, 68, 68, 0.3)", 
                christmasGlowColor: "rgba(30, 58, 138, 0.3)",
                snowGlowColor: "rgba(14, 165, 233, 0.4)",
                icon: "ÔøΩÔøΩÔøΩÔøΩ", 
                christmasIcon: "üéµ",
                snowIcon: "üéµ",
                unlocked: false 
            },
            { 
                days: 50, 
                name: "Niewidoczny ale skuteczny", 
                christmasName: "Duch Bo≈ºego Narodzenia",
                snowName: "Duch Zamieci",
                gradient: "linear-gradient(135deg, #6b7280, #111827)", 
                christmasGradient: "linear-gradient(135deg, #c41e3a, #22c55e, #ffffff)",
                snowGradient: "linear-gradient(135deg, #e0f2fe, #bae6fd, #ffffff)",
                borderColor: "#6b7280", 
                christmasBorderColor: "#c41e3a",
                snowBorderColor: "#e0f2fe",
                glowColor: "rgba(107, 114, 128, 0.3)", 
                christmasGlowColor: "rgba(196, 30, 58, 0.4)",
                snowGlowColor: "rgba(224, 242, 254, 0.5)",
                icon: "üèÜ", 
                christmasIcon: "‚ú®",
                snowIcon: "‚ùÑÔ∏è",
                unlocked: false, 
                animated: true 
            },
            { 
                days: 55, 
                name: "Cichy Przewodnik", 
                christmasName: "Gwiazda Betlejemska",
                snowName: "Gwiazda Polararna",
                gradient: "linear-gradient(135deg, #22c55e, #16a34a)", 
                christmasGradient: "linear-gradient(135deg, #ffd700, #ffffff)",
                snowGradient: "linear-gradient(135deg, #ffffff, #bae6fd)",
                borderColor: "#22c55e", 
                christmasBorderColor: "#ffd700",
                snowBorderColor: "#ffffff",
                glowColor: "rgba(34, 197, 94, 0.3)", 
                christmasGlowColor: "rgba(255, 215, 0, 0.5)",
                snowGlowColor: "rgba(255, 255, 255, 0.7)",
                icon: "üèÜ", 
                christmasIcon: "‚≠ê",
                snowIcon: "‚≠ê",
                unlocked: false 
            },
            { 
                days: 60, 
                name: "Latarnia Modlitwy", 
                christmasName: "Stra≈ºnik Stajenki",
                snowName: "Latarnia Polarna",
                gradient: "linear-gradient(135deg, #0ea5e9, #94a3b8)", 
                christmasGradient: "linear-gradient(135deg, #8b4513, #d2691e)",
                snowGradient: "linear-gradient(135deg, #38bdf8, #f0f9ff)",
                borderColor: "#0ea5e9", 
                christmasBorderColor: "#8b4513",
                snowBorderColor: "#38bdf8",
                glowColor: "rgba(14, 165, 233, 0.3)", 
                christmasGlowColor: "rgba(139, 69, 19, 0.3)",
                snowGlowColor: "rgba(56, 189, 248, 0.4)",
                icon: "üèÜ", 
                christmasIcon: "üè†",
                snowIcon: "üèîÔ∏è",
                unlocked: false 
            },
            { 
                days: 65, 
                name: "Stra≈ºnik Spokoju", 
                christmasName: "Anio≈Ç Pokoju",
                snowName: "≈önie≈ºny Anio≈Ç Spokoju",
                gradient: "linear-gradient(135deg, #14b8a6, #0891b2)", 
                christmasGradient: "linear-gradient(135deg, #e0f2fe, #bae6fd)",
                snowGradient: "linear-gradient(135deg, #f0f9ff, #bae6fd)",
                borderColor: "#14b8a6", 
                christmasBorderColor: "#bae6fd",
                snowBorderColor: "#f0f9ff",
                glowColor: "rgba(20, 184, 166, 0.3)", 
                christmasGlowColor: "rgba(186, 230, 253, 0.5)",
                snowGlowColor: "rgba(240, 249, 255, 0.6)",
                icon: "üèÜ", 
                christmasIcon: "üëº",
                snowIcon: "üëº",
                unlocked: false 
            },
            { 
                days: 70, 
                name: "KroczƒÖcy ≈öwiat≈Çem Modlitwy", 
                christmasName: "≈öwiƒôty Wƒôdrowiec",
                snowName: "Lodowy Wƒôdrowiec",
                gradient: "linear-gradient(135deg, #06b6d4, #94a3b8)", 
                christmasGradient: "linear-gradient(135deg, #dc2626, #fbbf24)",
                snowGradient: "linear-gradient(135deg, #0284c7, #cbd5e1)",
                borderColor: "#06b6d4", 
                christmasBorderColor: "#dc2626",
                snowBorderColor: "#0284c7",
                glowColor: "rgba(6, 182, 212, 0.3)", 
                christmasGlowColor: "rgba(220, 38, 38, 0.3)",
                snowGlowColor: "rgba(2, 132, 199, 0.4)",
                icon: "üèÜ", 
                christmasIcon: "üéÖ",
                snowIcon: "üßä",
                unlocked: false 
            },
            { 
                days: 75, 
                name: "Dyskretniacki Pielgrzym", 
                christmasName: "NiosƒÖcy Dary",
                snowName: "NiosƒÖcy ≈önieg",
                gradient: "linear-gradient(135deg, #a16207, #eab308)", 
                christmasGradient: "linear-gradient(135deg, #ffd700, #ff6b6b)",
                snowGradient: "linear-gradient(135deg, #ffffff, #e0f2fe)",
                borderColor: "#a16207", 
                christmasBorderColor: "#ffd700",
                snowBorderColor: "#ffffff",
                glowColor: "rgba(161, 98, 7, 0.3)", 
                christmasGlowColor: "rgba(255, 215, 0, 0.4)",
                snowGlowColor: "rgba(255, 255, 255, 0.6)",
                icon: "üèÜ", 
                christmasIcon: "üéÅ",
                snowIcon: "‚ùÑÔ∏è",
                unlocked: false 
            },
            { 
                days: 80, 
                name: "Pielgrzym Ciszy", 
                christmasName: "Cichej Nocy ≈öwiadek",
                snowName: "Cichej Zamieci ≈öwiadek",
                gradient: "linear-gradient(135deg, #1e3a8a, #3b82f6)", 
                christmasGradient: "linear-gradient(135deg, #1e3a8a, #ffffff)",
                snowGradient: "linear-gradient(135deg, #bae6fd, #ffffff)",
                borderColor: "#1e3a8a", 
                christmasBorderColor: "#1e3a8a",
                snowBorderColor: "#bae6fd",
                glowColor: "rgba(30, 58, 138, 0.3)", 
                christmasGlowColor: "rgba(30, 58, 138, 0.4)",
                snowGlowColor: "rgba(186, 230, 253, 0.5)",
                icon: "üèÜ", 
                christmasIcon: "üåô",
                snowIcon: "üåô",
                unlocked: false 
            },
            { 
                days: 85, 
                name: "Wƒôdrowiec ≈öwiat≈Ça", 
                christmasName: "R√≥≈ºaniec ≈öwiƒÖteczny",
                snowName: "Lodowy R√≥≈ºaniec",
                gradient: "linear-gradient(135deg, #831843, #db2777)", 
                christmasGradient: "linear-gradient(135deg, #be185d, #fdf2f8)",
                snowGradient: "linear-gradient(135deg, #38bdf8, #f0f9ff)",
                borderColor: "#831843", 
                christmasBorderColor: "#be185d",
                snowBorderColor: "#38bdf8",
                glowColor: "rgba(131, 24, 67, 0.3)", 
                christmasGlowColor: "rgba(190, 24, 93, 0.3)",
                snowGlowColor: "rgba(56, 189, 248, 0.4)",
                icon: "üèÜ", 
                christmasIcon: "üìø",
                snowIcon: "ÔøΩÔøΩÔøΩ",
                unlocked: false 
            },
            { 
                days: 90, 
                name: "Przenikliwy Dyskretniak", 
                christmasName: "Zielony Stra≈ºnik Nadziei",
                snowName: "Bia≈Çy Stra≈ºnik Nadziei",
                gradient: "linear-gradient(135deg, #047857, #10b981)", 
                christmasGradient: "linear-gradient(135deg, #14532d, #22c55e)",
                snowGradient: "linear-gradient(135deg, #f0f9ff, #bae6fd)",
                borderColor: "#047857", 
                christmasBorderColor: "#14532d",
                snowBorderColor: "#f0f9ff",
                glowColor: "rgba(4, 120, 87, 0.3)", 
                christmasGlowColor: "rgba(20, 83, 45, 0.4)",
                snowGlowColor: "rgba(240, 249, 255, 0.5)",
                icon: "üèÜ", 
                christmasIcon: "üå≤",
                snowIcon: "üèîÔ∏è",
                unlocked: false 
            },
            { 
                days: 95, 
                name: "P≈Çomie≈Ñ Wytrwa≈Ço≈õci", 
                christmasName: "Ognisko Betlejemskie",
                snowName: "Lodowy P≈Çomie≈Ñ",
                gradient: "linear-gradient(135deg, #ff6b35, #ff8c42)", 
                christmasGradient: "linear-gradient(135deg, #ff4500, #ffa500)",
                snowGradient: "linear-gradient(135deg, #0ea5e9, #38bdf8)",
                borderColor: "#ff6b35", 
                christmasBorderColor: "#ff4500",
                snowBorderColor: "#0ea5e9",
                glowColor: "rgba(255, 107, 53, 0.3)", 
                christmasGlowColor: "rgba(255, 69, 0, 0.4)",
                snowGlowColor: "rgba(14, 165, 233, 0.5)",
                icon: "üî•", 
                christmasIcon: "üî•",
                snowIcon: "üßä",
                unlocked: false 
            },
            { 
                days: 100, 
                name: "Cichy Filar Dyskrecji", 
                christmasName: "≈öwiƒÖteczny Archanio≈Ç",
                snowName: "Lodowy Archanio≈Ç",
                gradient: "linear-gradient(135deg, #475569, #1e40af)", 
                christmasGradient: "linear-gradient(135deg, #ffd700, #ffffff, #c41e3a)",
                snowGradient: "linear-gradient(135deg, #e0f2fe, #bae6fd, #ffffff)",
                borderColor: "#475569", 
                christmasBorderColor: "#ffd700",
                snowBorderColor: "#e0f2fe",
                glowColor: "rgba(71, 85, 105, 0.3)", 
                christmasGlowColor: "rgba(255, 215, 0, 0.5)",
                snowGlowColor: "rgba(224, 242, 254, 0.6)",
                icon: "‚ö°", 
                christmasIcon: "üëº",
                snowIcon: "‚ùÑÔ∏è",
                unlocked: false, 
                animated: true 
            }
        ];

        function updateStreak() {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            
            if (!lastStreakDate) {
                // Pierwsza passa
                currentStreak = 1;
            } else {
                const lastDate = new Date(lastStreakDate);
                const lastStreakDay = new Date(lastDate.getFullYear(), lastDate.getMonth(), lastDate.getDate());
                
                const yesterday = new Date(today);
                yesterday.setDate(yesterday.getDate() - 1);
                
                // Je≈õli ostatnie losowanie by≈Ço wczoraj, kontynuuj passƒô
                if (lastStreakDay.getTime() === yesterday.getTime()) {
                    currentStreak++;
                } else if (lastStreakDay.getTime() === today.getTime()) {
                    // Ten sam dzie≈Ñ - nie zmieniaj passy
                    return;
                } else {
                    // Przerwa w passie - rozpocznij od nowa
                    currentStreak = 1;
                }
            }
            
            lastStreakDate = now.toISOString();
            checkNewTitles();
        }

        function checkNewTitles() {
            titles.forEach(title => {
                if (currentStreak >= title.days && !unlockedTitles.includes(title.name)) {
                    unlockedTitles.push(title.name);
                    showTitleUnlocked(title);
                }
            });
            
            updateDrawButton();
            updateTitlesButton();
            showStreak();
        }

        function showTitleUnlocked(title) {
            createConfetti(title.borderColor);
            
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: ${title.gradient};
                color: white;
                padding: 20px 30px;
                border-radius: 12px;
                font-weight: 700;
                font-size: 1.2rem;
                z-index: 10000;
                box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                animation: titlePop 3s ease-out forwards;
                transition: all 0.5s ease;
                text-align: center;
            `;
            
            const line1 = document.createElement('div');
            line1.textContent = 'üèÜ Nowy tytu≈Ç odblokowany!';
            notification.appendChild(line1);
            
            const line2 = document.createElement('div');
            line2.textContent = '"' + title.name + '"';
            notification.appendChild(line2);
            
            document.body.appendChild(notification);
            
            // Zmiana kolor√≥w co 0.5 sekundy
            const colorInterval = setInterval(() => {
                const randomTitle = titles[Math.floor(Math.random() * titles.length)];
                notification.style.background = randomTitle.gradient;
                notification.style.boxShadow = `0 8px 32px ${randomTitle.glowColor}`;
            }, 500);
            
            setTimeout(() => {
                clearInterval(colorInterval);
                notification.remove();
            }, 3000);
        }

        function createConfetti(color) {
            const confettiCount = 50;
            const colors = [color, '#ffffff', '#ffd700'];
            
            for (let i = 0; i < confettiCount; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    const randomColor = colors[Math.floor(Math.random() * colors.length)];
                    
                    confetti.style.cssText = `
                        position: fixed;
                        width: 10px;
                        height: 10px;
                        background: ${randomColor};
                        top: -10px;
                        left: ${Math.random() * 100}%;
                        z-index: 9999;
                        border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
                        animation: confettiFall ${2 + Math.random() * 3}s linear forwards;
                        transform: rotate(${Math.random() * 360}deg);
                    `;
                    
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }, i * 50);
            }
        }



        function getStreakMessage() {
            if (currentStreak === 0) return '';
            if (currentStreak === 1) return 'üî• Pierwszy dzie≈Ñ modlitwy!';
            if (currentStreak < 7) return `üî• Passa: ${currentStreak} dni z rzƒôdu!`;
            if (currentStreak < 30) return `üî•üî• ≈öwietna passa: ${currentStreak} dni!`;
            if (currentStreak < 100) return `üî•üî•üî• Niesamowita passa: ${currentStreak} dni!`;
            return `üî•üî•üî•üî• Legendarna passa: ${currentStreak} dni!`;
        }

        function showUpcomingTitleNotification() {
            const nextTitle = titles.find(title => 
                !unlockedTitles.includes(title.name) && title.days > currentStreak
            );
            
            if (!nextTitle) return;
            
            const daysLeft = nextTitle.days - currentStreak;
            
            if (daysLeft <= 3 && daysLeft > 0) {
                let notificationElement = document.getElementById('upcomingTitleNotification');
                
                if (!notificationElement) {
                    notificationElement = document.createElement('div');
                    notificationElement.id = 'upcomingTitleNotification';
                    notificationElement.className = 'upcoming-title-notification';
                    document.getElementById('streakSection').appendChild(notificationElement);
                }
                
                const message = daysLeft === 1 
                    ? '‚≠ê Jutro zdobƒôdziesz tytu≈Ç "' + nextTitle.name + '"!'
                    : '‚≠ê Za ' + daysLeft + ' dni zdobƒôdziesz tytu≈Ç "' + nextTitle.name + '"!';
                
                notificationElement.textContent = message;
                notificationElement.style.display = 'block';
            } else {
                const notificationElement = document.getElementById('upcomingTitleNotification');
                if (notificationElement) {
                    notificationElement.style.display = 'none';
                }
            }
        }

        function updateCountdown() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            
            const timeLeft = tomorrow - now;
            
            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            document.getElementById('countdown').textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function canDrawToday() {
            if (!lastDrawDate) return true;
            
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const lastDraw = new Date(lastDrawDate);
            const lastDrawDay = new Date(lastDraw.getFullYear(), lastDraw.getMonth(), lastDraw.getDate());
            
            // Je≈õli to inny dzie≈Ñ, mo≈ºna losowaƒá
            return today.getTime() !== lastDrawDay.getTime();
        }

        function updateDrawButton() {
            const button = document.getElementById('drawButton');
            const highestTitle = getHighestUnlockedTitle();
            const lostStreak = parseInt(localStorage.getItem('lostStreak') || '0');
            const isChristmas = document.body.classList.contains('theme-christmas');
            const isSnow = document.body.classList.contains('theme-snow');
            
            if (canDrawToday()) {
                button.disabled = false;
                button.textContent = 'Losuj intencjƒô i modlitwƒô';
                
                // Poka≈º komunikat o utraconej passie
                if (lostStreak > 0) {
                    showLostStreakMessage(lostStreak);
                }
            } else {
                button.disabled = true;
                button.textContent = 'Ju≈º losowa≈Çe≈õ dzisiaj';
            }
            
            if (highestTitle) {
                button.className = 'draw-button title-border';
                let borderColor = highestTitle.borderColor;
                let glowColor = highestTitle.glowColor;
                
                if (isChristmas) {
                    borderColor = highestTitle.christmasBorderColor;
                    glowColor = highestTitle.christmasGlowColor;
                } else if (isSnow) {
                    borderColor = highestTitle.snowBorderColor;
                    glowColor = highestTitle.snowGlowColor;
                }
                
                button.style.setProperty('--title-color', borderColor);
                button.style.setProperty('--title-glow', glowColor);
            } else {
                button.className = 'draw-button';
            }
        }

        function getHighestUnlockedTitle() {
            let highestTitle = null;
            
            titles.forEach(title => {
                if (unlockedTitles.includes(title.name)) {
                    if (!highestTitle || title.days > highestTitle.days) {
                        highestTitle = title;
                    }
                }
            });
            
            return highestTitle;
        }

        function showTodaysResults() {
            if (!lastDrawDate || !todaysPrayer || !todaysIntention) return;
            
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const lastDraw = new Date(lastDrawDate);
            const lastDrawDay = new Date(lastDraw.getFullYear(), lastDraw.getMonth(), lastDraw.getDate());
            
            if (today.getTime() === lastDrawDay.getTime()) {
                const resultsArea = document.getElementById('resultsArea');
                
                const prayerObj = prayers.find(p => p.title === todaysPrayer) || { title: todaysPrayer, text: todaysPrayer };
                currentPrayerData = prayerObj;
                
                resultsArea.innerHTML = `
                    <div class="result-card show">
                        <div class="result-title">
                            <div class="icon">üíù</div>
                            Dzisiejsza intencja
                        </div>
                        <div class="result-content">${todaysIntention}</div>
                    </div>
                    <div class="result-card show">
                        <div class="result-title">
                            <div class="icon">üôè</div>
                            Dzisiejsza modlitwa
                        </div>
                        <div class="result-content">
                            <div class="prayer-title">${prayerObj.title}</div>
                            <div class="prayer-subtitle" onclick="openPrayerModal()">naci≈õnij aby wy≈õwietliƒá pe≈Çny tekst</div>
                        </div>
                    </div>
                `;
                showCountdown();
                showStreak();
            }
        }

        function showLostStreakMessage(lostStreak) {
            const streakSection = document.getElementById('streakSection');
            let lostStreakElement = document.getElementById('lostStreakMessage');
            
            if (!lostStreakElement) {
                lostStreakElement = document.createElement('div');
                lostStreakElement.id = 'lostStreakMessage';
                lostStreakElement.className = 'lost-streak-message';
                streakSection.insertBefore(lostStreakElement, streakSection.firstChild);
            }
            
            const message = 'üíî Utraci≈Çe≈õ: ' + lostStreak + ' ' + (lostStreak === 1 ? 'dzie≈Ñ' : 'dni') + ' passy.\nMo≈ºesz zaczƒÖƒá od nowa naciskajƒÖc przycisk losuj';
            lostStreakElement.textContent = message;
            lostStreakElement.style.display = 'block';
            lostStreakElement.style.whiteSpace = 'pre-line';
            streakSection.style.display = 'block';
        }

        function showStreak() {
            const streakMessage = getStreakMessage();
            if (streakMessage) {
                const streakElement = document.getElementById('streakMessage');
                const titleElement = document.getElementById('currentTitle');
                const highestTitle = getHighestUnlockedTitle();
                const isChristmas = document.body.classList.contains('theme-christmas');
                const isSnow = document.body.classList.contains('theme-snow');
                
                document.getElementById('streakSection').style.display = 'block';
                streakElement.textContent = streakMessage;
                
                if (highestTitle) {
                    streakElement.className = 'streak-message title-border';
                    
                    let borderColor = highestTitle.borderColor;
                    let glowColor = highestTitle.glowColor;
                    let displayGradient = highestTitle.gradient;
                    let displayName = highestTitle.name;
                    
                    if (isChristmas) {
                        borderColor = highestTitle.christmasBorderColor;
                        glowColor = highestTitle.christmasGlowColor;
                        displayGradient = highestTitle.christmasGradient;
                        displayName = highestTitle.christmasName;
                    } else if (isSnow) {
                        borderColor = highestTitle.snowBorderColor;
                        glowColor = highestTitle.snowGlowColor;
                        displayGradient = highestTitle.snowGradient;
                        displayName = highestTitle.snowName;
                    }
                    
                    streakElement.style.setProperty('--title-color', borderColor);
                    streakElement.style.setProperty('--title-glow', glowColor);
                    streakElement.style.setProperty('--title-bg', borderColor + '15');
                    
                    titleElement.textContent = displayName;
                    if (highestTitle.animated) {
                        titleElement.className = 'current-title animated';
                    } else {
                        titleElement.className = 'current-title';
                        titleElement.style.background = displayGradient;
                        titleElement.style.webkitBackgroundClip = 'text';
                        titleElement.style.webkitTextFillColor = 'transparent';
                        titleElement.style.backgroundClip = 'text';
                    }
                    titleElement.style.display = 'block';
                } else {
                    streakElement.className = 'streak-message';
                    titleElement.style.display = 'none';
                }
            }
            
            showUpcomingTitleNotification();
        }

        function showCountdown() {
            document.getElementById('countdownSection').style.display = 'block';
        }

        function openPrayerModal() {
            if (currentPrayerData) {
                showPrayerModal(currentPrayerData.title, currentPrayerData.text);
            }
        }

        function showPrayerModal(title, text) {
            document.getElementById('prayerModalTitle').textContent = title;
            document.getElementById('prayerModalText').textContent = text;
            document.getElementById('prayerModal').classList.add('show');
        }

        function hidePrayerModal() {
            document.getElementById('prayerModal').classList.remove('show');
        }

        function startDrawing() {
            if (!canDrawToday()) {
                return;
            }

            const drawingArea = document.getElementById('drawingArea');
            const resultsArea = document.getElementById('resultsArea');
            
            resultsArea.innerHTML = '';
            
            drawingArea.innerHTML = `
                <div class="drawing-animation">
                    <div class="drawing-text" id="drawingText">Losujƒô intencjƒô...</div>
                </div>
            `;

            const intentionOptions = [...intentions];
            let intentionIndex = 0;
            const intentionInterval = setInterval(() => {
                document.getElementById('drawingText').textContent = intentionOptions[intentionIndex % intentionOptions.length];
                intentionIndex++;
            }, 100);

            setTimeout(() => {
                clearInterval(intentionInterval);
                const selectedIntention = intentions[Math.floor(Math.random() * intentions.length)];
                
                drawingArea.innerHTML = `
                    <div class="drawing-animation">
                        <div class="drawing-text" id="drawingText2">Losujƒô modlitwƒô...</div>
                    </div>
                `;

                const prayerOptions = prayers.map(p => p.title);
                let prayerIndex = 0;
                const prayerInterval = setInterval(() => {
                    document.getElementById('drawingText2').textContent = prayerOptions[prayerIndex % prayerOptions.length];
                    prayerIndex++;
                }, 100);

                setTimeout(() => {
                    clearInterval(prayerInterval);
                    const selectedPrayer = prayers[Math.floor(Math.random() * prayers.length)];
                    currentPrayerData = selectedPrayer;
                    
                    drawingArea.innerHTML = '';
                    
                    const today = new Date();
                    lastDrawDate = today.toISOString();
                    todaysPrayer = selectedPrayer.title;
                    todaysIntention = selectedIntention;
                    
                    updateStreak();
                    
                    drawHistory.unshift({
                        date: new Date().toISOString(),
                        prayer: selectedPrayer.title,
                        intention: selectedIntention,
                        streak: currentStreak
                    });
                    
                    if (drawHistory.length > 10) {
                        drawHistory = drawHistory.slice(0, 10);
                    }
                    
                    saveAllData();
                    
                    resultsArea.innerHTML = `
                        <div class="result-card">
                            <div class="result-title">
                                <div class="icon">üíù</div>
                                Twoja dzisiejsza intencja
                            </div>
                            <div class="result-content">${selectedIntention}</div>
                        </div>
                        <div class="result-card">
                            <div class="result-title">
                                <div class="icon">üôè</div>
                                Twoja dzisiejsza modlitwa
                            </div>
                            <div class="result-content">
                                <div class="prayer-title">${selectedPrayer.title}</div>
                                <div class="prayer-subtitle" onclick="openPrayerModal()">naci≈õnij aby wy≈õwietliƒá pe≈Çny tekst</div>
                            </div>
                        </div>
                    `;
                    
                    setTimeout(() => {
                        document.querySelectorAll('.result-card').forEach(card => {
                            card.classList.add('show');
                        });
                    }, 100);
                    
                    // Usu≈Ñ komunikat o utraconej passie po wylosowaniu
                    localStorage.removeItem('lostStreak');
                    const lostStreakElement = document.getElementById('lostStreakMessage');
                    if (lostStreakElement) {
                        lostStreakElement.remove();
                    }
                    
                    updateDrawButton();
                    showCountdown();
                    showStreak();
                }, 3000);
            }, 3000);
        }

        function updateTitlesDisplay() {
            const container = document.getElementById('titlesContainer');
            const isChristmas = document.body.classList.contains('theme-christmas');
            const isSnow = document.body.classList.contains('theme-snow');
            
            container.innerHTML = '';
            
            const unlockedTitles_elements = [];
            const lockedTitles_elements = [];
            
            titles.forEach((title, index) => {
                const isUnlocked = unlockedTitles.includes(title.name);
                const progress = Math.min((currentStreak / title.days) * 100, 100);
                
                let displayName = title.name;
                let displayIcon = title.icon;
                let displayGradient = title.gradient;
                
                if (isChristmas) {
                    displayName = title.christmasName;
                    displayIcon = title.christmasIcon;
                    displayGradient = title.christmasGradient;
                } else if (isSnow) {
                    displayName = title.snowName;
                    displayIcon = title.snowIcon;
                    displayGradient = title.snowGradient;
                }
                
                const titleCard = document.createElement('div');
                titleCard.className = `title-card ${isUnlocked ? 'unlocked' : 'locked'}`;
                titleCard.style.cssText = `--gradient: ${displayGradient}; animation-delay: ${index * 0.1}s;`;
                
                const titleNameDiv = document.createElement('div');
                titleNameDiv.className = `title-name ${title.animated ? 'animated' : ''}`;
                
                const iconDiv = document.createElement('div');
                iconDiv.className = 'title-icon';
                iconDiv.textContent = displayIcon;
                
                titleNameDiv.appendChild(iconDiv);
                titleNameDiv.appendChild(document.createTextNode(displayName));
                
                const requirementDiv = document.createElement('div');
                requirementDiv.className = 'title-requirement';
                requirementDiv.textContent = isUnlocked ? 'Odblokowany!' : `Wymagane: ${title.days} dni z rzƒôdu`;
                
                const progressDiv = document.createElement('div');
                progressDiv.className = 'title-progress';
                
                const progressBar = document.createElement('div');
                progressBar.className = `title-progress-bar ${title.animated ? 'animated' : ''}`;
                progressBar.style.cssText = `width: ${progress}%; background: ${displayGradient};`;
                
                progressDiv.appendChild(progressBar);
                
                const statusDiv = document.createElement('div');
                statusDiv.className = `title-status ${isUnlocked ? 'unlocked' : 'locked'}`;
                statusDiv.textContent = isUnlocked ? '‚úÖ Zdobyty' : `${currentStreak}/${title.days} dni`;
                
                titleCard.appendChild(titleNameDiv);
                titleCard.appendChild(requirementDiv);
                titleCard.appendChild(progressDiv);
                titleCard.appendChild(statusDiv);
                
                if (isUnlocked) {
                    unlockedTitles_elements.push(titleCard);
                } else {
                    lockedTitles_elements.push(titleCard);
                }
            });
            
            unlockedTitles_elements.forEach(el => container.appendChild(el));
            lockedTitles_elements.forEach(el => container.appendChild(el));
        }

        function saveAllData() {
            try {
                localStorage.setItem('lastDrawDate', lastDrawDate || '');
                localStorage.setItem('todaysPrayer', todaysPrayer || '');
                localStorage.setItem('todaysIntention', todaysIntention || '');
                localStorage.setItem('drawHistory', JSON.stringify(drawHistory || []));
                localStorage.setItem('currentStreak', currentStreak.toString());
                localStorage.setItem('lastStreakDate', lastStreakDate || '');
                localStorage.setItem('unlockedTitles', JSON.stringify(unlockedTitles || []));
            } catch (e) {
                console.log('B≈ÇƒÖd zapisywania danych:', e);
            }
        }

        // Ustawienia
        function showSettingsModal() {
            document.getElementById('settingsModal').classList.add('show');
            document.getElementById('settingsButton').classList.add('hidden');
        }

        function hideSettingsModal() {
            document.getElementById('settingsModal').classList.remove('show');
            document.getElementById('settingsButton').classList.remove('hidden');
        }

        function switchTab(tabName) {
            document.querySelectorAll('.settings-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
            document.getElementById(tabName + 'Tab').classList.add('active');
        }

        function changeColorScheme(theme) {
            document.querySelectorAll('.color-scheme').forEach(scheme => {
                scheme.classList.remove('active');
            });
            document.querySelector(`[data-theme="${theme}"]`).classList.add('active');
            
            document.documentElement.className = '';
            document.body.className = '';
            document.documentElement.classList.add(`theme-${theme}`);
            document.body.classList.add(`theme-${theme}`);
            
            localStorage.setItem('selectedTheme', theme);
            
            // Od≈õwie≈º wy≈õwietlanie przy zmianie motywu
            updateDrawButton();
            updateTitlesButton();
            showStreak();
            if (document.getElementById('titlesModal').classList.contains('show')) {
                updateTitlesDisplay();
            }
        }

        function changeFontStyle(fontStyle) {
            document.querySelectorAll('.font-option').forEach(option => {
                option.classList.remove('active');
            });
            document.querySelector(`[data-font="${fontStyle}"]`).classList.add('active');
            
            const titleElement = document.getElementById('mainTitle');
            titleElement.className = 'title';
            
            switch(fontStyle) {
                case 'elegancka':
                    titleElement.classList.add('font-elegancka');
                    break;
                case 'zawijasy':
                    titleElement.classList.add('font-zawijasy');
                    break;
                case 'prosta':
                    titleElement.classList.add('font-prosta');
                    break;
                case 'nowoczesna':
                    titleElement.classList.add('font-nowoczesna');
                    break;
            }
            
            localStorage.setItem('selectedFont', fontStyle);
        }

        function loadSettings() {
            const savedTheme = localStorage.getItem('selectedTheme') || 'blue';
            const savedFont = localStorage.getItem('selectedFont') || 'zawijasy';
            
            changeColorScheme(savedTheme);
            changeFontStyle(savedFont);
        }

        function updateTitlesButton() {
            const button = document.getElementById('titlesButton');
            const highestTitle = getHighestUnlockedTitle();
            const isChristmas = document.body.classList.contains('theme-christmas');
            const isSnow = document.body.classList.contains('theme-snow');
            
            if (highestTitle) {
                button.className = 'titles-button title-border';
                
                let borderColor = highestTitle.borderColor;
                let glowColor = highestTitle.glowColor;
                
                if (isChristmas) {
                    borderColor = highestTitle.christmasBorderColor;
                    glowColor = highestTitle.christmasGlowColor;
                } else if (isSnow) {
                    borderColor = highestTitle.snowBorderColor;
                    glowColor = highestTitle.snowGlowColor;
                }
                
                button.style.setProperty('--title-color', borderColor);
                button.style.setProperty('--title-glow', glowColor);
            } else {
                button.className = 'titles-button';
            }
        }

        function showTitlesModal() {
            updateTitlesDisplay();
            document.getElementById('titlesModal').classList.add('show');
        }

        function hideTitlesModal() {
            document.getElementById('titlesModal').classList.remove('show');
        }

        // Przycisk przewijania do g√≥ry
        window.addEventListener('scroll', function() {
            const scrollButton = document.getElementById('scrollToTop');
            if (window.pageYOffset > 300) {
                scrollButton.classList.add('show');
            } else {
                scrollButton.classList.remove('show');
            }
        });

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Zamykanie modali po klikniƒôciu w t≈Ço
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('titles-modal')) {
                hideTitlesModal();
            }
            if (e.target.classList.contains('prayer-modal')) {
                hidePrayerModal();
            }
            if (e.target.classList.contains('settings-modal')) {
                hideSettingsModal();
            }
        });

        // Ustaw domy≈õlny schemat kolor√≥w przy starcie
        document.documentElement.classList.add('theme-blue');
        document.body.classList.add('theme-blue');

        window.addEventListener('load', function() {
            loadData();
            loadSettings();
            updateDrawButton();
            updateTitlesButton();
            showTodaysResults();
        });

        updateDrawButton();
        updateTitlesButton();
        showTodaysResults();
        showStreak();
        
        setInterval(updateCountdown, 1000);
        
        setInterval(() => {
            const now = new Date();
            if (now.getHours() === 0 && now.getMinutes() === 0) {
                updateDrawButton();
            }
            saveAllData();
        }, 60000);

        // Dodaj animacje CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes titlePop {
                0% {
                    transform: translate(-50%, -50%) scale(0.3) rotateZ(-10deg);
                    opacity: 0;
                    filter: blur(5px);
                }
                20% {
                    transform: translate(-50%, -50%) scale(1.2) rotateZ(5deg);
                    opacity: 1;
                    filter: blur(0px);
                }
                80% {
                    transform: translate(-50%, -50%) scale(1) rotateZ(0deg);
                    opacity: 1;
                    filter: blur(0px);
                }
                100% {
                    transform: translate(-50%, -50%) scale(0.8) rotateZ(0deg);
                    opacity: 0;
                    filter: blur(3px);
                }
            }

            @keyframes confettiFall {
                0% {
                    transform: translateY(-20px) rotate(0deg) scale(1);
                    opacity: 1;
                }
                50% {
                    transform: translateY(50vh) rotate(360deg) scale(1.2);
                    opacity: 0.8;
                }
                100% {
                    transform: translateY(100vh) rotate(720deg) scale(0.5);
                    opacity: 0;
                }
            }

            @keyframes gradientFlow {
                0%, 100% { background-position: 0% 50%; }
                50% { background-position: 100% 50%; }
            }
        `;
        document.head.appendChild(style);
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a8442cba102c051',t:'MTc2NDc3NzQ1OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
